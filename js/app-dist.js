"use strict";var reactiveNumber=angular.module("reactiveNumber",["reactiveController","ngRoute","ngAnimate","ngDialog"]);reactiveNumber.directive("backButton",function(){return{restrict:"A",link:function(e,t){function n(){history.back(),e.$apply()}t.bind("click",n)}}}),reactiveNumber.config(["$routeProvider",function(e){e.when("/high-score",{templateUrl:"html/_high-score.html",controller:"HighScore"}).when("/how-to",{templateUrl:"html/_how-to.html",controller:"HowTo"}).when("/game/:command",{templateUrl:"html/_game.html",controller:"Game"}).when("/about",{templateUrl:"html/_about.html",controller:"About"}).otherwise({redirectTo:"/game/continue"})}]),reactiveNumber.directive("animateOnChange",["$animate",function(e){return function(t,n,r){console.log(r.animateOnChange),t.$watch(r.animateOnChange,function(t,r){if(t!=r){var o="change";e.addClass(n,o).then(function(){e.removeClass(n,o),console.log("fallback")})}})}}]),reactiveNumber.directive("animateOnIncrease",["$animate",function(e){return function(t,n,r){console.log(r.animateOnChange),t.$watch(r.animateOnChange,function(t,r){if(t>r){var o="change";e.addClass(n,o).then(function(){e.removeClass(n,o),console.log("fallback")})}})}}]),reactiveNumber.directive("animateBoard",["$animate","$timeout",function(e){return function(t,n,r){t.$watch(r.animateBoard,function(t,r){var o="";t!=r&&(o=t>r?"changeup":"changedown",0==t&&(o="changezero"),0==r&&0!=t&&(o="changeadd"),e.addClass(n.children(),o).then(function(){e.removeClass(n.children(),o)}))})}}]),reactiveNumber.service("scoreService",function(){function e(e){var t=e.score,n=e.level,r=e.date,o=e.max_combo,a=e.turn;return Math.ceil(t*n/r.getHours()+r.getMilliseconds()/4+o/a)}function t(){var e=localStorage.getItem(r(o));return void 0!=e?JSON.parse(r(e)):void 0}function n(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(n,r){var o=n[e]<r[e]?-1:n[e]>r[e]?1:0;return o*t}}function r(e){var t="",n=c.match;for(console.log(n+" Key"),i=0;i<e.length;i++)t+=String.fromCharCode(n^e.charCodeAt(i));return t}var o="hs",a=20;this.saveHighScore=function(a){var i=t();void 0==i&&(i=[]),a.scores=e(a),i.push(a),i.sort(n("-score")),i.length>100&&i.pop(),localStorage.setItem(r(o),r(JSON.stringify(i)))},this.getPageCount=function(){var e=t();return void 0==e?0:Math.ceil(e.length/a)},this.getList=function(e,r){var o=t();return void 0==o?void 0:(o.sort(n(e)),o=o.slice((r-1)*a,(r-1)*a+20),console.log("Length "+o.length),o)},this.getHighestScore=function(){var e=t();return void 0==e?e:(e.sort(n("-score")),e.shift())}}),reactiveNumber.config(["$animateProvider",function(e){e.classNameFilter(/^((?!(bar-fill)).)*$/)}]);
